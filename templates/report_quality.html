<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{{ report }}</title>
    <style>
        {{ style_sheet_content | safe }}
    </style>
</head>
  <body class="body-style">
    <div class="report-main-container">
    <!-- Header with patient and exam info -->
    <div class="header-container">
      <div class="header-title">{{ quality_report }} {{for}} {{patient_name}}</div>
      <div class="header-info">
        {% if not anonimize %}
        <!-- Patient info -->
        <div class="patient-info">
          <p class="general-texts"><strong>{{ patient_name_label }}:</strong> {{ patient_name }}</p>
          <p class="general-texts"><strong>{{ birth_date_label }}:</strong> {{ patient_birth }}</p>
          <p class="general-texts"><strong>{{ examination_date_label }}:</strong> {{ exam_date }}</p>
          <p class="general-texts"><strong>{{ quality_system_label }}:</strong> {{ quality_system_name }}</p>
        </div>
        <!-- Middle Column more exam info-->
        <div class="exam-info">
          <p class="general-texts"><strong>{{ examination_type_label }}:</strong> {{ exam_type }}</p>
          <p class="general-texts"><strong>{{ referring_physician_label }}:</strong> {{ ref_phys }}</p>
          <p class="general-texts"><strong>{{ performing_operator_label }}:</strong> {{ operator_name }}</p>
          <p class="general-texts"><strong>{{ quality_values_label }}:</strong> {{ quality_values }}</p>
        </div>
        <!-- Quality Module -->
        <div class="quality-module">
          <p ><strong>{{ overall_quality_label }}</strong></p>
          <div class="quality-overall-container">
            <div class="quality-overall {{ overall_quality }}_background">{{ overall_quality }}</div>
          </div>
  
          <p class="general-texts"><strong>{{ quality_label }}:</strong> {{ quality_confirmed }} {{ quality_confirmed_icon|safe }}</p>
        </div>
  
        <!-- Right Column (density and module status) -->
        <div class="density-module">
          <p><strong>{{ overall_density_label }}</strong></p>
          <div class="density-circle {{ overall_density }}">{{ overall_density }}</div>
          <p><strong>{{ density_label }}:</strong> {{density_confirmed}} {{ density_confirmed_icon|safe }} </p>
        </div>
        {% endif %}
      </div>
      <!-- Risk -->
      <div class="risk-info">
        <p class="risk-label"><strong>{{ risk_label }}:</strong></p>
        <div class="risk-details">
          <p class="risk-evaluation">
            <span class="risk-icon">&#128994;</span>&nbsp;{{ patient_risk_evaluation }}
          </p>
          <p class="risk-description">{{ risk_description }}</p>
        </div>
      </div>
    </div>
   
    <!-- Quality Feats  -->
    <div class="main-features-container">
      <!-- CC Main row container  -->
      <div class="quality-row">
        <!-- RCC Section -->
        <div class="quality-section">
          <div class="quality-label">
            <span class="label-text">{{ rcc_label }}</span><br />
            <div class="quality-badge {{ quality_class_rcc }}_background">
              <span class="badge-text">{{ quality_class_rcc }}</span>
            </div>          
          </div>
            <div class="quality-details">
              <div class="quality-explanation-box {{ quality_class_rcc }}_box">
                <p><strong>{{ quality_explanation_label }}:</strong></p>
                <div class="quality-explanation-list">{{ quality_explanation_rcc }}</div>
              </div>
              <p><strong>{{ compression_label }}:</strong> <span class="green">{{ compression_rcc }} N</span></p>
              <p><strong>{{ symmetry_label }}:</strong> <span class="green">{{ symmetry_rcc }}</span></p>
              <p><strong>{{ blur_label }}:</strong> <span class="green">{{ blur_rcc }}</span></p>
              <p><strong>{{ pnl }}:</strong> <span class="green">{{ pnl_class_rcc }}</span> <span class="values">{{ pnl_rcc }}&nbsp;mm</span></p>
              <p><strong>{{ pnl_diff_label }}:</strong> <span class="green">{{ pnl_diff_rcc }}</span></p>
              <p><strong>{{ mamilla_deviation_label }}:</strong> <span class="orange">{{ nipple_centered_rcc }}</span></p>
              <p><strong>{{ mamilla_profile_label }}:</strong> <span class="red">{{ nipple_rcc }}</span></p>
              <p><strong>{{ medial_parenchyma_label }}:</strong> <span class="green">{{ medial_parenchyma_rcc }}</span></p>
              <p><strong>{{ lateral_parenchyma_label }}:</strong> <span class="green">{{ lateral_parenchyma_rcc }}</span></p>
              <p><strong>{{ pectoralis_label }}:</strong> <span class="red">{{ pectMuscle_rcc }}</span></p>
              <p><strong>{{ skin_folds_label }}:</strong> <span class="green">{{ skin_folds_location_rcc }} {{ skin_folds_severity_rcc }}</span></p>
              <p><strong>{{ breast_volume_label }}:</strong>{{ breast_volume_rcc }} {{ gross_volume_rcc }} cm³</p>
              <p><strong>{{ dose_label }}:</strong> {{ dose_rcc }}</p>
              <p><strong>{{ post_surgery_label }}:</strong> {{ post_surgery_rcc }}</p>
              <p><strong>{{ clips_label }}:</strong> {{ clips_rcc }}</p>              
          </div>          
        </div>
  
        <!-- CC proj Images -->
        <div class="quality-images-container">
          <div class="quality-images-right">
            <div class="density_chip dens-left {{density_rcc}}">
              <p><strong>{{density_rcc}}</strong></p>
            </div>
            <img src="{{ rcc_proj_img }}" alt="{{ breast_image_alt }}" class="projection_image" />
            {{ parenchyma_contours_rcc|safe }}
            {{ pectoralis_contours_rcc|safe }}
            {{ skin_folds_contours_rcc|safe }}
            {{parenchyma_lateral_cuts_rcc|safe}}
            {{parenchyma_medial_cuts_rcc|safe}}
          </div>
          <div class="quality-images-left">
            <div class="density_chip dens-right {{density_lcc}}">
              <p><strong>{{density_lcc}}</strong></p>
            </div>
            <img src="{{ lcc_proj_img }}" alt="{{ breast_image_alt }}" class="projection_image" />
            {{ parenchyma_contours_lcc|safe }}
            {{ pectoralis_contours_lcc|safe }}
            {{ skin_folds_contours_lcc|safe }}
            {{parenchyma_lateral_cuts_lcc|safe}}
            {{parenchyma_medial_cuts_lcc|safe}}
          </div>
        </div>
  
        <!-- LCC Section-->
        <div class="quality-section">
          <div class="quality-label">
            <span class="label-text">{{ lcc_label }}</span><br />
            <div class="quality-badge {{ quality_class_lcc }}_background">
              <span class="badge-text">{{ quality_class_lcc }}</span>
            </div>    
          </div>
          <div class="quality-details">
            <div class="quality-explanation-box {{ quality_class_lcc }}_box">
              <p><strong>{{ quality_explanation_label }}:</strong></p>
              <div class="quality-explanation-list">{{ quality_explanation_lcc }}</div>
            </div>
            <p><strong>{{ compression_label }}:</strong> <span class="green">{{ compression_lcc }} N</span></p>
            <p><strong>{{ symmetry_label }}:</strong> <span class="green">{{ symmetry_lcc }}</span></p>
            <p><strong>{{ blur_label }}:</strong> <span class="green">{{ blur_lcc }}</span></p>
            <p><strong>{{ pnl }}:</strong> <span class="green">{{ pnl_class_lcc }}</span> <span class="values">{{ pnl_lcc }}&nbsp;mm</span></p>
            <p><strong>{{ pnl_diff_label }}:</strong> <span class="green">{{ pnl_diff_lcc }}</span></p>
            <p><strong>{{ mamilla_deviation_label }}:</strong> <span class="orange">{{ nipple_centered_lcc }}</span></p>
            <p><strong>{{ mamilla_profile_label }}:</strong> <span class="red">{{ nipple_lcc }}</span></p>
            <p><strong>{{ medial_parenchyma_label }}:</strong> <span class="green">{{ medial_parenchyma_lcc }}</span></p>
            <p><strong>{{ lateral_parenchyma_label }}:</strong> <span class="green">{{ lateral_parenchyma_lcc }}</span></p>
            <p><strong>{{ pectoralis_label }}:</strong> <span class="red">{{ pectMuscle_lcc }}</span></p>
            <p><strong>{{ skin_folds_label }}:</strong> <span class="green">{{ skin_folds_location_lcc }} {{ skin_folds_severity_lcc }}</span></p>            <p><strong>{{ breast_volume_label }}:</strong>{{ breast_volume_lcc }} {{ gross_volume_lcc }} cm³</p>
            <p><strong>{{ dose_label }}:</strong> {{ dose_lcc }}</p>
            <p><strong>{{ post_surgery_label }}:</strong> {{ post_surgery_lcc }}</p>
            <p><strong>{{ clips_label }}:</strong> {{ clips_lcc }}</p>
          </div>          
        </div>
      </div>
  
      <!-- MLO Main row container  -->
      <div class="quality-row">

        <!-- RMLO Section -->
        <div class="quality-section">
          <div class="quality-label">
            <span class="label-text">{{ rmlo_label }}</span><br />
            <div class="quality-badge {{ quality_class_rmlo }}_background">
              <span class="badge-text">{{ quality_class_rmlo }}</span>
            </div>    
          </div>
          <div class="quality-details">
            <div class="quality-explanation-box {{ quality_class_rmlo }}_box">
              <p><strong>{{ quality_explanation_label }}:</strong></p>
              <div class="quality-explanation-list">{{ quality_explanation_rmlo }}</div>
            </div>
            <p><strong>{{ compression_label }}:</strong> <span class="green">{{ compression_rmlo }} N</span></p>
            <p><strong>{{ elevation_label }}:</strong> {{ elevation_rmlo }}</p>
            <p><strong>{{ symmetry_label }}:</strong> <span class="green">{{ symmetry_rmlo }}</span></p>
            <p><strong>{{ blur_label }}:</strong> <span class="green">{{ blur_rmlo }}</span></p>
            <p><strong>{{ mamilla_profile_label }}:</strong> <span class="orange">{{ nipple_profile_lmlo }}</span></p>
            <p><strong>{{ pnl }}:</strong> <span class="green">{{ pnl_class_rmlo }}</span> <span class="values">{{ pnl_rmlo }}&nbsp;mm</span></p>
            <p><strong>{{ parenchyma_label }}:</strong> <span class="green">{{ parenchyma_rmlo }}</span></p>
            <p><strong>{{ pectoralis_angle_label }}:</strong> <span class="red">{{ pectoralis_angle_rmlo }}</span></p>
            <p><strong>{{ pectoralis_relax_label }}:</strong> <span class="red">{{ pectoralis_shape_rmlo }}</span></p>
            <p><strong>{{ pectoralis_nipple_level_label }}:</strong> <span class="red">{{ pectoralis_level_rmlo }}</span></p>
            <p><strong>{{ imf_label }}:</strong> <span class="red">{{ imf_rmlo }}</span></p>
            <p><strong>{{ skin_folds_label }}:</strong> <span class="green">{{ skin_folds_location_rmlo }} {{ skin_folds_severity_rmlo }}</span></p>
            <br/>
            <p><strong>{{ breast_volume_label }}:</strong>{{ breast_volume_rmlo }} {{ gross_volume_rmlo }} cm³</p>
            <p><strong>{{ dose_label }}:</strong> {{ dose_rmlo }}</p>
            <p><strong>{{ post_surgery_label }}:</strong> {{ post_surgery_rmlo }}</p>
            <p><strong>{{ clips_label }}:</strong> {{ clips_rmlo }}</p>
          </div>          
        </div>

      
        <!-- MLO proj Images -->
        <div class="quality-images-container">
          <div class="quality-images-right">
            <div class="density_chip dens-left {{density_rmlo}}">
              <p><strong>{{density_rmlo}}</strong></p>
            </div>
            <img src="{{ rmlo_proj_img }}" alt="{{ breast_image_alt }}" class="projection_image" />
            {{ parenchyma_contours_rmlo|safe }}
            {{ pectoralis_contours_rmlo|safe }}
            {{ skin_folds_contours_rmlo|safe }}
            {{parenchyma_cuts_rmlo|safe}}
  
          </div>
          <div class="quality-images-left">
            <div class="density_chip dens-right {{density_lmlo}}">
              <p><strong>{{density_lmlo}}</strong></p>
            </div>
            <img src="{{ lmlo_proj_img }}" alt="{{ breast_image_alt }}" class="projection_image" />
            {{ parenchyma_contours_lmlo|safe }}
            {{ pectoralis_contours_lmlo|safe }}
            {{ skin_folds_contours_lmlo|safe }}
            {{parenchyma_cuts_lmlo|safe}}
          </div>
        </div>
  
        <!-- LMLO Section-->
        <div class="quality-section">
          <div class="quality-label">
            <span class="label-text">{{ lmlo_label }}</span><br />
            <div class="quality-badge {{ quality_class_lmlo }}_background">
              <span class="badge-text">{{ quality_class_lmlo }}</span>
            </div>    
          </div>
          <div class="quality-details">
            <div class="quality-explanation-box {{ quality_class_lmlo }}_box">
              <p><strong>{{ quality_explanation_label }}:</strong></p>
              <div class="quality-explanation-list">{{ quality_explanation_lmlo }}</div>
            </div>
            <p><strong>{{ compression_label }}:</strong> <span class="green">{{ compression_lmlo }} N</span></p>
            <p><strong>{{ elevation_label }}:</strong> {{ elevation_rmlo }}</p>
            <p><strong>{{ symmetry_label }}:</strong> <span class="green">{{ symmetry_lmlo }}</span></p>
            <p><strong>{{ blur_label }}:</strong> <span class="green">{{ blur_lmlo }}</span></p>
            <p><strong>{{ mamilla_profile_label }}:</strong> <span class="orange">{{ nipple_profile_lmlo }}</span></p>
            <p><strong>{{ pnl }}:</strong> <span class="green">{{ pnl_class_lmlo }}</span> <span class="values">{{ pnl_lmlo }}&nbsp;mm</span></p>
            <p><strong>{{ parenchyma_label }}:</strong> <span class="green">{{ parenchyma_lmlo }}</span></p>
            <p><strong>{{ pectoralis_angle_label }}:</strong> <span class="red">{{ pectoralis_angle_rmlo }}</span></p>
            <p><strong>{{ pectoralis_relax_label }}:</strong> <span class="red">{{ pectoralis_shape_rmlo }}</span></p>
            <p><strong>{{ pectoralis_nipple_level_label }}:</strong> <span class="red">{{ pectoralis_level_rmlo }}</span></p>
            <p><strong>{{ imf_label }}:</strong> <span class="red">{{ imf_rmlo }}</span></p>
            <p><strong>{{ skin_folds_label }}:</strong> <span class="green">{{ skin_folds_location_lmlo }} {{ skin_folds_severity_lmlo }}</span></p>
            <br/>
            <p><strong>{{ breast_volume_label }}:</strong>{{ breast_volume_lmlo }} {{ gross_volume_lmlo }} cm³</p>
            <p><strong>{{ dose_label }}:</strong> {{ dose_lmlo }}</p>
            <p><strong>{{ post_surgery_label }}:</strong> {{ post_surgery_lmlo }}</p>
            <p><strong>{{ clips_label }}:</strong> {{ clips_rmlo }}</p>
          </div>  
        </div>
      </div>

      <div class="limitations-info">
        <p><strong>{{ limitations_label }}:</strong></p>
        <p>{{limitations}}</p>
      </div>
  
      <div class="footer-info">
        <p>{{udi_title}} <strong>{{udi}}</strong></p>
        <p class="disclaimer">{{disclaimer}}</p>
        <p class="disclaimer">{{disclaimer_text}}</p>
        <p class="disclaimer">{{disclaimer_long}}</p>
      </div>
    </div>
  </div>
  </body>
</html>
